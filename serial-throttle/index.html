<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mimic panel serial throttle &mdash; Pete&#39;s Pages  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/peteGSX-theme.css" type="text/css" />
    <link rel="canonical" href="https://petegsx-projects.github.io/serial-throttle/index.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Programmable DCC Turntable Controller" href="../turntable-controller/index.html" />
    <link rel="prev" title="Device Driver and EX-RAIL Integration" href="../rotary-encoder/ex-rail-integration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Pete's Pages
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../rotary-encoder/overview.html">DCC-EX Rotary Encoder</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rotary-encoder/control-knob.html">Control Knob Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rotary-encoder/turntable-controller.html">Turntable Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rotary-encoder/ex-rail-integration.html">Device Driver and EX-RAIL Integration</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Mimic panel serial throttle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../turntable-controller/index.html">Programmable DCC Turntable Controller</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../turntable-controller/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turntable-controller/hardware.html">Hardware components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turntable-controller/software.html">Software and Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turntable-controller/programming.html">Programming</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rokuhan-turnout-control/index.html">Rokuhan DCC Turnout Controller</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rokuhan-turnout-control/overview.html">Overview</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bluetooth-programmer/index.html">HC-05/06 Bluetooth Programmer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manage-github-labels/index.html">Managing GitHub labels with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">How to contact me</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pete's Pages</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Mimic panel serial throttle</li>
  
    
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/peteGSX-Projects/petegsx-projects.github.io/blob/sphinx/docs/serial-throttle/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  

  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../rotary-encoder/ex-rail-integration.html" class="btn btn-neutral float-left" title="Device Driver and EX-RAIL Integration" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../turntable-controller/index.html" class="btn btn-neutral float-right" title="Programmable DCC Turntable Controller" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mimic-panel-serial-throttle">
<h1>Mimic panel serial throttle<a class="headerlink" href="#mimic-panel-serial-throttle" title="Permalink to this heading"></a></h1>
<aside class="sidebar">
<nav class="contents local" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#hardware" id="id1">Hardware</a></p></li>
<li><p><a class="reference internal" href="#panel-design" id="id2">Panel design</a></p></li>
<li><p><a class="reference internal" href="#software" id="id3">Software</a></p></li>
<li><p><a class="reference internal" href="#throttle-usage-instructions" id="id4">Throttle usage instructions</a></p></li>
</ul>
</nav>
</aside>
<p>I’ve decided to build a mimic panel for my layout which would need to include a throttle capable of controlling multiple trains concurrently.</p>
<p>After seeing various different throttle projects and ideas shared in the DCC-EX team’s Discord server, and building one of the team’s hand held WiFi/WiThrottle based controllers, I decided to go with some slide potentiometers for throttle control, a standard 4 x 3 keypad for input duties, and a 1.3” SPI OLED display for output, and that it will connect to my EX-CommandStation via serial cable as it will be fixed to the side of my layout.</p>
<a class="reference internal image-reference" href="../_images/IMG_4998.JPG"><img alt="Front view" src="../_images/IMG_4998.JPG" style="width: 302.40000000000003px; height: 403.20000000000005px;" /></a>
<a class="reference internal image-reference" href="../_images/IMG_4997.JPG"><img alt="Rear view" src="../_images/IMG_4997.JPG" style="width: 302.40000000000003px; height: 403.20000000000005px;" /></a>
<p>There is also a quick and dirty video available on <a class="reference external" href="https://www.youtube.com/watch?v=uzAAL3OKxE0">YouTube</a>.</p>
<section id="hardware">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Hardware</a><a class="headerlink" href="#hardware" title="Permalink to this heading"></a></h2>
<p>The brains of the throttle are an Arduino Nano clone, and the software is available in GitHub (see <a class="reference internal" href="#software"><span class="std std-ref">Software</span></a>).</p>
<p>For the throttle inputs, I’m using <a class="reference external" href="https://www.jaycar.com.au/duinotech-10k-ohm-slider-potentiometer-module/p/XC3734?pos=3&amp;queryId=ef2bae5db0b425b82c157b0774288151&amp;sort=relevance">Duinotech brand 10K linear slide potentiometers</a> sourced locally here from Jaycar Electronics , however any 10K linear slide or rotary potentiometers will work. In fact, I have also assembled another throttle for my test setup which uses three 10K linear rotary potentiometers to save space.</p>
<p>For the display, I’m also using a <a class="reference external" href="https://www.jaycar.com.au/duinotech-1-3-inch-monochrome-oled-display/p/XC3728?pos=1&amp;queryId=7acf08343c86584d30569e8c38014c92&amp;sort=relevance">Duinotech brand 1.3” 128 x 64 monochrome SPI OLED</a> also sourced from Jaycar Electronics . For my test setup, I’m using a smaller generic 0.96” 128 x 64 I2C OLED display sourced from eBay. Any equivalent SPI or I2C based OLED display with 128 x 64 resolution should suffice.</p>
<p>The <a class="reference external" href="https://www.jaycar.com.au/12-key-numeric-keypad/p/SP0770?pos=2&amp;queryId=b8b9b8588af031e994c61d38f57ccc50&amp;sort=relevance">4x3 kepad</a> is also (surprisingly) sourced from Jaycar Electronics. I much prefer the feel of these keypads over the membrane type, however any 4 x 3 keypad should suffice.</p>
<p>This diagram outlines the connections between the devices and Arduino Nano when using an SPI OLED.</p>
<a class="reference internal image-reference" href="../_images/serial-throttle-spi-oled.png"><img alt="Fritzing diagram" src="../_images/serial-throttle-spi-oled.png" style="width: 777.0px; height: 573.6px;" /></a>
<p>This diagram outlines the connections between the devices and Arduino Nano when using an I2C OLED.</p>
<a class="reference internal image-reference" href="../_images/serial-throttle-i2c-oled.png"><img alt="Fritzing diagram" src="../_images/serial-throttle-i2c-oled.png" style="width: 777.0px; height: 554.6999999999999px;" /></a>
</section>
<section id="panel-design">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Panel design</a><a class="headerlink" href="#panel-design" title="Permalink to this heading"></a></h2>
<p>The panel was designed using Fusion360 and then printed on my Creality Ender 3V2 printer. I haven’t shared the file in Thingiverse as it’s pretty specific to my application, and will only work with the specific components sourced from Jaycar. I’m more than happy to share if there is interest though.</p>
</section>
<section id="software">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Software</a><a class="headerlink" href="#software" title="Permalink to this heading"></a></h2>
<p>The software for the throttle is available in my <a class="reference external" href="https://github.com/peteGSX-Projects/dcc-ex-serial-throttle">dcc-ex-serial-throttle GitHub repository</a>.</p>
<p>The aim of the software is to use native DCC-EX API integration to control the various aspects of my layout, including concurrent control of three locomotives, and eventuallyl being able to initiate automated routes and close/throw turnouts. Given the throttle will be physically mounted on my mimic panel, operating turnouts and my turntable are very low priorities for the throttle.</p>
<p>Right now, the software is very much a work-in-progress and is extremely limited. The loco addresses are currently hard coded.</p>
<p>The immediate plans I will be implementing when time allows are:</p>
<ul class="simple">
<li><p>Enable manually entering locomotive addresses via the keypad</p></li>
<li><p>Enable reading the roster entries from the DCC-EX EX-CommandStation for selection via the keypad</p></li>
</ul>
</section>
<section id="throttle-usage-instructions">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Throttle usage instructions</a><a class="headerlink" href="#throttle-usage-instructions" title="Permalink to this heading"></a></h2>
<p>(Note as per above that locomotive addresses are currently hardcoded)</p>
<p>The table below outlines the current keypad functions.</p>
<p>Keys listed with an asterisk (*) mean they key needs to be held down for half a second or more, all other key presses are momentary.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Function</p></td>
<td><p>Loco 1 Key</p></td>
<td><p>Loco 2 Key</p></td>
<td><p>Loco 3 Key</p></td>
</tr>
<tr class="row-even"><td><p>Change direction</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>Headlight on/off</p></td>
<td><p>4</p></td>
<td><p>5</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-even"><td><p>Temporary stop</p></td>
<td><p>7*</p></td>
<td><p>8*</p></td>
<td><p>9*</p></td>
</tr>
<tr class="row-odd"><td><p>Track power on/off</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Emergency stop</p></td>
<td><p>0*</p></td>
<td><p>0*</p></td>
<td><p>0*</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../rotary-encoder/ex-rail-integration.html" class="btn btn-neutral float-left" title="Device Driver and EX-RAIL Integration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../turntable-controller/index.html" class="btn btn-neutral float-right" title="Programmable DCC Turntable Controller" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Peter Cole.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HBTV6STT77"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-HBTV6STT77', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>