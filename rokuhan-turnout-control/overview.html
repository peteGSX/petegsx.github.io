<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overview &mdash; Pete&#39;s Pages  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/peteGSX-theme.css" type="text/css" />
    <link rel="canonical" href="https://petegsx-projects.github.io/rokuhan-turnout-control/overview.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DCC-EX Simple Throttle" href="../simple-throttle/index.html" />
    <link rel="prev" title="Rokuhan DCC Turnout Controller" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Pete's Pages
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../dcc-ex-turntable-controller/index.html">DCC-EX Turntable Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rotary-encoder/overview.html">DCC-EX Rotary Encoder (archived)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rotary-encoder/control-knob.html">Control Knob Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rotary-encoder/turntable-controller.html">Turntable Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rotary-encoder/ex-rail-integration.html">Device Driver and EX-RAIL Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../serial-throttle/index.html">Mimic panel serial throttle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modulated-ir-sensor/index.html">Modulated IR Sensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../turntable-controller/index.html">Programmable DCC Turntable Controller</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../turntable-controller/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turntable-controller/hardware.html">Hardware components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turntable-controller/software.html">Software and Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turntable-controller/programming.html">Programming</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Rokuhan DCC Turnout Controller</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../simple-throttle/index.html">DCC-EX Simple Throttle</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bluetooth-programmer/index.html">HC-05/06 Bluetooth Programmer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manage-github-labels/index.html">Managing GitHub labels with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">How to contact me</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pete's Pages</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Rokuhan DCC Turnout Controller</a></li>
      <li class="breadcrumb-item active">Overview</li>
  
    
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/peteGSX-Projects/petegsx-projects.github.io/blob/sphinx/docs/rokuhan-turnout-control/overview.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  

  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="index.html" class="btn btn-neutral float-left" title="Rokuhan DCC Turnout Controller" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../simple-throttle/index.html" class="btn btn-neutral float-right" title="DCC-EX Simple Throttle" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="https://github.com/peteGSX-Projects/rokuhan-dcc-point-control">This repository</a> contains the code for an Arduino based controller capable of switching either two or four Rokuhan brand electronic turnouts using DCC for digital control.</p>
<p>This uses either two L293D motor controller ICs or an L298 based motor shield to control the turnouts.</p>
<p>The code complies with the NMRA standard setting direction 1 for Closed, and 0 for Thrown.</p>
<section id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Permalink to this heading"></a></h2>
<p>Rokuhan turnouts require a very brief pulse to switch the direction only, and continuous current will burn the motor out. This code has been written to cater for this.</p>
<p>I have found an input voltage of 9V to be reliable, meaning the same power source can be used to power both the Arduino itself as well as providing the switching voltage to the turnouts.</p>
<p>Note that with Rokuhan Shorty (45mm radius) type turnouts, I have had to increase the voltage to 10V for reliable switching.</p>
<p>Digital Command Control (DCC) is used to trigger the turnout changes by inverting the direction, then setting the speed to max momentarily to trigger the change in direction.</p>
</section>
<section id="arduino-pins">
<h2>Arduino pins<a class="headerlink" href="#arduino-pins" title="Permalink to this heading"></a></h2>
<p>The code uses the pins below for the various functions:</p>
<section id="dcc-pins">
<h3>DCC pins<a class="headerlink" href="#dcc-pins" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>D2 - Interrupt pin used for DCC decoding</p></li>
<li><p>D3 - Used for the DCC ACK signal</p></li>
</ul>
</section>
<section id="turnout-1-pins-connect-to-first-l293d">
<h3>Turnout 1 pins - connect to first L293D<a class="headerlink" href="#turnout-1-pins-connect-to-first-l293d" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>A4 - L293D input 1 - HIGH for through, LOW for branch</p></li>
<li><p>A5 - L293D input 2 - LOW for through, HIGH for branch</p></li>
<li><p>D5 - L293D enable 1 - set to max speed PWM 255 for 25ms to switch</p></li>
</ul>
</section>
<section id="point-2-pins-connect-to-first-l293d">
<h3>Point 2 pins - connect to first L293D<a class="headerlink" href="#point-2-pins-connect-to-first-l293d" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>D4 - L293D input 3 - HIGH for through, LOW for branch</p></li>
<li><p>D7 - L293D input 4 - LOW for through, HIGH for branch</p></li>
<li><p>D6 - L293D enable 2 - set to max speed PWM 255 for 25ms to switch</p></li>
</ul>
</section>
<section id="point-3-pins-connect-to-second-l293d">
<h3>Point 3 pins - connect to second L293D<a class="headerlink" href="#point-3-pins-connect-to-second-l293d" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>D8 - L293D input 1 - HIGH for through, LOW for branch</p></li>
<li><p>D11 - L293D input 2 - LOW for through, HIGH for branch</p></li>
<li><p>D9 - L293D enable 1 - set to max speed PWM 255 for 25ms to switch</p></li>
</ul>
</section>
<section id="point-4-pins-connect-to-second-l293d">
<h3>Point 4 pins - connect to second L293D<a class="headerlink" href="#point-4-pins-connect-to-second-l293d" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>D12 - L293D input 3 - HIGH for through, LOW for branch</p></li>
<li><p>D13 - L293D input 4 - LOW for through, HIGH for branch</p></li>
<li><p>D10 - L293D enable 2 - set to max speed PWM 255 for 25ms to switch</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Rokuhan DCC Turnout Controller" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../simple-throttle/index.html" class="btn btn-neutral float-right" title="DCC-EX Simple Throttle" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Peter Cole.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HBTV6STT77"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-HBTV6STT77', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>