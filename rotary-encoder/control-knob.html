<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Control Knob Mode &mdash; Pete&#39;s Pages  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/peteGSX-theme.css" type="text/css" />
    <link rel="canonical" href="https://petegsx-projects.github.io/rotary-encoder/control-knob.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Turntable Controller" href="turntable-controller.html" />
    <link rel="prev" title="DCC-EX Rotary Encoder" href="overview.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Pete's Pages Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Pete's Pages
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  <li><a href="/blog.html">DCC-EX Blog</a></li>
  <jinja2.runtime.BlockReference object at 0x7fb7aae9f640>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pete's Pages</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="overview.html">DCC-EX Rotary Encoder</a></li>
      <li class="breadcrumb-item active">Control Knob Mode</li>
  
    
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/peteGSX-Projects/petegsx-projects.github.io/blob/sphinx/docs/rotary-encoder/control-knob.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  

  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="overview.html" class="btn btn-neutral float-left" title="DCC-EX Rotary Encoder" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="turntable-controller.html" class="btn btn-neutral float-right" title="Turntable Controller" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="control-knob-mode">
<h1>Control Knob Mode<a class="headerlink" href="#control-knob-mode" title="Permalink to this heading"></a></h1>
<aside class="sidebar">
<nav class="contents local" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#hardware-details" id="id1">Hardware details</a></p></li>
<li><p><a class="reference internal" href="#configuration-options" id="id2">Configuration options</a></p>
<ul>
<li><p><a class="reference internal" href="#knob-mode-configuration-options" id="id3">Knob mode configuration options</a></p></li>
</ul>
</li>
</ul>
</nav>
</aside>
<p>In the control knob mode, an OLED displays both the last position sent to the EX-CommandStation in addition to the currently selected rotary encoder position.</p>
<p>A single button press will send the current rotary encoder position to the EX-CommandStation.</p>
<p>Valid positions are from -127 to 127, as a single byte is used to send this value over I2C, with rotation in a clockwise direction incrementing from 0 to 127, and counter-clockwise decrementing to -127. The direction can be reversed via configuration option.</p>
<section id="hardware-details">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Hardware details</a><a class="headerlink" href="#hardware-details" title="Permalink to this heading"></a></h2>
<a class="reference internal image-reference" href="../_images/rotary-encoder.png"><img alt="Rotary Encoder Fritzing" src="../_images/rotary-encoder.png" style="width: 938.0px; height: 480.0px;" /></a>
<p>A suitable rotary encoder (tested on KY-040) and SPI OLED connected to a suitable AVR based Arduino (tested on a Nano) is all that’s required for the generic control knob functionality, with the Arduino connected to your EX-CommandStation via I2C as outlined in the Fritzing diagram.</p>
</section>
<section id="configuration-options">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Configuration options</a><a class="headerlink" href="#configuration-options" title="Permalink to this heading"></a></h2>
<p>Various configuration options can be edited in the file “config.h”. By default, this file does not exist, and an example file “config.example.h” with the various options has been provided. It is recommended to copy the example file to your own “config.h”, as the example file will be overwritten by any future changes to the software.</p>
<p>For general configuration options, refer to <a class="reference internal" href="overview.html#general-configuration-options"><span class="std std-ref">General configuration options</span></a>.</p>
<section id="knob-mode-configuration-options">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Knob mode configuration options</a><a class="headerlink" href="#knob-mode-configuration-options" title="Permalink to this heading"></a></h3>
<p>The only configuration options required in control knob mode are for the OLED connections.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Details and options</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OLED_CS</p></td>
<td><p>7</p></td>
<td><p>OLED CS/chip select pin</p></td>
</tr>
<tr class="row-odd"><td><p>OLED_DC</p></td>
<td><p>9</p></td>
<td><p>OLED DC pin</p></td>
</tr>
</tbody>
</table>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">/////////////////////////////////////////////////////////////////////////////////////</span>
<span class="c1">//  START: KNOB mode configuration options.</span>
<span class="c1">/////////////////////////////////////////////////////////////////////////////////////</span>
<span class="cp">#define OLED_CS  7        </span><span class="c1">// Define OLED CS/chip select pin</span>
<span class="cp">#define OLED_DC  9        </span><span class="c1">// Define OLED DC pin</span>
<span class="c1">/////////////////////////////////////////////////////////////////////////////////////</span>
<span class="c1">//  END: KNOB mode configuration options.</span>
<span class="c1">/////////////////////////////////////////////////////////////////////////////////////</span>
</pre></div>
</div>
</section>
</section>
</section>

<div class="section">
   
</div>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="overview.html" class="btn btn-neutral float-left" title="DCC-EX Rotary Encoder" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="turntable-controller.html" class="btn btn-neutral float-right" title="Turntable Controller" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Peter Cole.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HBTV6STT77"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-HBTV6STT77', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>